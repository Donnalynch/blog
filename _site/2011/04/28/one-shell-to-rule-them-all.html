<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <link href="/css/site.css" type="text/css" rel="stylesheet"/>
        <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
        <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
        <title>(think) - One shell to rule them all...</title>

        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-22917580-1']);
            _gaq.push(['_trackPageview']);

            (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>
    </head>

    <body>
        <div id="page">
            <div id="content">
                <div id="header">
                    <h1>(think)</h1>
                    <p class="comment">/** An online novel about the Source, the Force, the real life and everything
                    in between...**/</p>
                </div>
                <div id="middle">
                    <div id="menu">
                        <ul id="list-nav">
                            <li><a href="/index.html">Home</a></li>
                            <li><a href="/archive.html">Archive</a></li>
                            <li><a href="/projects.html">Projects</a></li>
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contacts.html">Contacts</a></li>
                        </ul>
                    </div>
                    <div id="content">
                        <div id="post">
    <h2 class="title">One shell to rule them all...</h2>
    <p>I&#8217;ve been using zsh for about three years now and continue to be impressed the its immense power and flexibility. Switching from bash to zsh was a decision as good as switching from Windows to GNU/Linux, from vim to Emacs, from Eclipse to IntelliJ IDEA. In other words - it was an extremely good decision. :-)</p>

<p>So I want to finally get the word out, showcase some nice zsh features and probably persuade a couple of bash users to try it. Be warned, however - after you try it there is no going back&#8230;</p>

<h2 id='getting_started'>Getting started</h2>

<p>Most distros come with bash by default so you&#8217;ll probably need to install zsh first and configure it as your user&#8217;s shell. On Fedora you&#8217;d do:</p>

<p><div class='highlight'><pre><code class='console'><span class='go'>[bozhidar@bozhidar ~]$ sudo yum install zsh</span>
</code></pre>
</div></p>

<p>The edit /etc/password and set there zsh as your shell:</p>

<p>bozhidar:x:500:500:Bozhidar Batsov:/home/bozhidar:/bin/zsh</p>

<p>The next time you login a terminal wizard with start up asking you about some basic zsh options that you might want to enable. I suggest you to enable them all except the beep option. In the end the wizard will save the new configuration to the file .zshrc in your user&#8217;s home folder.</p>

<p>Alternatively you may just use a preconfigured .zshrc, like this one:</p>
<div class='highlight'><pre><code class='bash'><span class='c'># Lines configured by zsh-newuser-install</span>
<span class='nv'>HISTFILE</span><span class='o'>=</span>~/.histfile
<span class='nv'>HISTSIZE</span><span class='o'>=</span>1000
<span class='nv'>SAVEHIST</span><span class='o'>=</span>1000
setopt appendhistory autocd extendedglob nomatch notify correct_all
unsetopt beep
bindkey -e
<span class='c'># End of lines configured by zsh-newuser-install</span>
<span class='c'># The following lines were added by compinstall</span>
zstyle :compinstall filename <span class='s1'>&#39;/home/bozhidar/.zshrc&#39;</span>

autoload -Uz compinit
compinit
<span class='c'># End of lines added by compinstall</span>
</code></pre>
</div>
<p>I don&#8217;t like very much the default zsh prompt and I generally change it right away. Have a look at my other <a href='/2008/07/27/zsh-prompt.html'>short article</a> on the topic.</p>

<h2 id='playing_around'>Playing around</h2>

<p>At this point you have the legendary zsh autocompletion configured and you have enabled many of the zsh core features.</p>

<ul>
<li>autocd allows you to navigate to folders only with their name without the cd command. One of my favourite features. Now you can do things like</li>
</ul>

<p><span>bozhidar@bozhidar ~</span>$ Downloads <br /><span>bozhidar@bozhidar ~/Downloads</span>$</p>

<p>Instead of</p>

<p><span>bozhidar@bozhidar ~</span>$ cd Downloads <br /><span>bozhidar@bozhidar ~/Downloads</span>$</p>

<p>autocd was added in bash 4.0 as well. You can enable it there with</p>

<p><span>bozhidar@bozhidar ~</span>$ shopt -s autocd</p>

<ul>
<li>
<p>appendhistory all your open shells share the same history which is handy if you want to refer commands from one shell in another with say Ctrl+R(reverse-history-search)</p>
</li>

<li>
<p>extendedglob allows you to recursive look for files in folders</p>
</li>
</ul>

<p><span>bozhidar@bozhidar ~</span>$ ls somedir/<strong>/Makefile</strong></p>

<p>is equivalent to</p>

<p><span>bozhidar@bozhidar ~</span>$ find somedir -name Makefile</p>

<p>Most zsh users never use find for simple file look up. This feature was also added to bash 4.0 but it works in a slightly different manner.</p>

<p>$ shopt -s extglob</p>

<ul>
<li>correct - autocorrects mistyped commands</li>
</ul>

<p><span>bozhidar@bozhidar</span>$ cta ~/.zshrc zsh: correct &#8216;cta&#8217; to &#8216;cat&#8217; <span>nyae</span>?</p>

<h1 id='keybindings'>Keybindings</h1>

<p>By default zsh uses Emacs keybindings which is perfect for a long time Emacs user like me. zsh doesn&#8217;t use readline, instead it has its own line editing library called zle, which is much more powerful. vi users are not forgotten and can switch zsh to vi keybindings with the command</p>

<p>bindkey -v</p>

<p>Mind that by default you&#8217;ll be in &#8220;insert&#8221; mode and have to press ESC to go into command mode.</p>
    <div style="font-style: italic; color: #7f9f7f;">Posted on 28 Apr 2011 by Bozhidar.</div>
    <hr />
    <div id="disqus">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'batsov'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    var disqus_identifier = document.location.href;
    var disqus_url = document.location.href;

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</div>

                    </div>
                </div>
                <div id="footer">
                    <p>Copyright &copy; 2010-2011 <a href="mailto:bozhidar.batsov@gmail.com">Bozhidar Batsov</a>. All Rights Reserved.</p>
                </div>
            </div>
            <div id="sidebar">
                <div id="twitter">
                    <script src="http://widgets.twimg.com/j/2/widget.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        new TWTR.Widget({
                        version: 2,
                        type: 'profile',
                        rpp: 4,
                        interval: 6000,
                        width: 250,
                        height: 300,
                        theme: {
                        shell: {
                        background: '#333333',
                        color: '#ffffff'
                        },
                        tweets: {
                        background: '#000000',
                        color: '#ffffff',
                        links: '#4aed05'
                        }
                        },
                        features: {
                        scrollbar: false,
                        loop: false,
                        live: false,
                        hashtags: true,
                        timestamp: true,
                        avatars: false,
                        behavior: 'all'
                        }
                        }).render().setUser('bbatsov').start();
                    </script>
                </div>
            </div>
        </div>
        <script type="text/javascript">
    var disqus_shortname = 'batsov'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    </body>
</html>
